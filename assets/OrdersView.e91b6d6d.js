import{_ as V,a as k,o as a,c as l,e as d,d as t,w as p,am as g,S as m,a9 as h,an as f,p as I,f as C,ap as c,ao as D,g as N,i as b}from"./index.9492dcfa.js";import{_ as B}from"./Space.a082ada8.js";import{_ as O,a as q}from"./Table.ba1b3af6.js";const y=r=>(I("data-v-87e13e88"),r=r(),C(),r),A={id:"ordersbox"},E=y(()=>t("h1",{class:"title"},"\u8A02\u55AE\u7BA1\u7406",-1)),L=y(()=>t("thead",null,[t("tr",null,[t("th",null,"\u8A02\u55AEID"),t("th",null,"\u65E5\u671F"),t("th",null,"\u4F7F\u7528\u8005"),t("th",null,"\u91D1\u984D"),t("th",null,"\u5546\u54C1"),t("th",null,"\u7DE8\u8F2F")])],-1)),P=N("\u522A\u9664"),F={__name:"OrdersView",setup(r){const _=k([]),x=async(s,o)=>{try{await g.delete("/orders/"+s),m.fire({icon:"success",title:"\u6210\u529F",text:"\u522A\u9664\u6210\u529F"}),_.splice(o,1)}catch(e){m.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}};return(async()=>{try{const{data:s}=await g.get("/orders/all");_.push(...s.result.map(o=>(o.totalPrice=o.products.reduce((e,i)=>e+i.product.price*i.quantity,0),o)))}catch(s){console.log(s),m.fire({icon:"error",title:"\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u8A02\u55AE"})}})(),(s,o)=>{const e=O,i=b,v=q,w=B;return a(),l("div",A,[E,d(e),t("div",null,[d(w,{vertical:""},{default:p(()=>[d(v,{striped:""},{default:p(()=>[L,t("tbody",null,[(a(!0),l(h,null,f(_,(n,S)=>(a(),l(h,null,[_.length>0?(a(),l("tr",{key:n._id},[t("td",null,c(n._id),1),t("td",null,c(new Date(n.date).toLocaleDateString()),1),t("td",null,c(n.user.account),1),t("td",null,c(n.totalPrice),1),t("td",null,[t("ul",null,[(a(!0),l(h,null,f(n.products,u=>(a(),l("li",{key:u._id},c(u.product.name)+" x "+c(u.quantity),1))),128))])]),t("td",null,[d(i,{type:"error",onClick:u=>x(n._id,S)},{default:p(()=>[P]),_:2},1032,["onClick"])])])):D("",!0)],64))),256))])]),_:1})]),_:1})])])}}},G=V(F,[["__scopeId","data-v-87e13e88"]]);export{G as default};
