import{_ as I,a as k,r as U,D as C,o as i,c as p,e as o,d as e,w as d,am as f,S as m,a8 as g,an as N,aq as h,p as B,f as D,ap as v,ao as A,g as E,i as q}from"./index.27586df5.js";import{_ as z}from"./Space.7724acde.js";import{_ as F}from"./Pagination.ce6208db.js";import{_ as L,a as M}from"./Table.59de1965.js";import"./Input.c97bbfe0.js";import"./Tag.5329d263.js";const x=a=>(B("data-v-3dbeff02"),a=a(),D(),a),P={id:"usersbox"},T=x(()=>e("h1",{class:"title"},"\u6703\u54E1\u7BA1\u7406",-1)),$=x(()=>e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"\u4F7F\u7528\u8005"),e("th",null,"\u522A\u9664")])],-1)),j=E("\u522A\u9664"),G={__name:"UsersView",setup(a){const u=k([]),c=U(1),r=1,_=C(()=>u.slice(c.value*r-r,c.value*r)),y=async t=>{const l=_.value.findIndex(n=>n._id===t);try{await f.delete("/users/"+t),m.fire({icon:"success",title:"\u6210\u529F",text:"\u522A\u9664\u6210\u529F"}),_.value.splice(l,1)}catch(n){m.fire({icon:"error",title:"\u5931\u6557",text:n.isAxiosError?n.response.data.message:n.message})}};return(async()=>{try{const{data:t}=await f.get("/users/all");u.push(...t.result)}catch(t){console.log(t),m.fire({icon:"error",title:"\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u6703\u54E1\u8CC7\u6599"})}})(),(t,l)=>{const n=L,w=q,b=M,S=z,V=F;return i(),p("div",P,[T,o(n),e("div",null,[o(S,{vertical:""},{default:d(()=>[o(b,{striped:""},{default:d(()=>[$,e("tbody",null,[(i(!0),p(g,null,N(h(_),(s,J)=>(i(),p(g,null,[h(_).length>0?(i(),p("tr",{key:s._id},[e("td",null,v(s._id),1),e("td",null,v(s.account),1),e("td",null,[o(w,{type:"error",onClick:K=>y(s._id)},{default:d(()=>[j]),_:2},1032,["onClick"])])])):A("",!0)],64))),256))])]),_:1})]),_:1})]),o(V,{page:c.value,"onUpdate:page":l[0]||(l[0]=s=>c.value=s),"page-count":Math.ceil(u.length/r)},null,8,["page","page-count"])])}}},Z=I(G,[["__scopeId","data-v-3dbeff02"]]);export{Z as default};
